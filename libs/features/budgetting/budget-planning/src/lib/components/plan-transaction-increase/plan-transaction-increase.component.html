<div [formGroup]="planTransactionIncreaseFormGroup" fxLayout="column">
  <div formGroupName="pTIncreaseFormGroup">
    <div fxLayout="row" fxLayoutAlign="start center">
      <div fxFlex="60">Transaction Occurs: <b>{{ frequency }}</b></div>
  
      <div fxFlex="40" class="form-field form-field-toggle">
        <mat-slide-toggle color="primary"
                          (change)="hasIncreaseChanged($event)"
                          [disabled]="frequency == null || frequency == 'once'"
                          formControlName="hasIncrease" name="hasIncrease">
          Value varies over time
        </mat-slide-toggle>
      </div>
    </div>
  
    <div *ngIf="hasIncrease"  fxLayout="column" fxLayoutAlign="start" fxLayoutGap="20px">
  
      <!-- Amount Increase -->
      <div class="form-section" fxLayout="column">
        <h4 class="mat-title type-title">Amount Increase</h4>
      
        <div class="form-section-body" fxLayout="column">
          <div class="form-section-sub">
            <div class="form-section-sub-title">Increase Time</div>
  
            <div class="form-field increase-select">
              <!-- <mat-radio-group formControlName="amountIncreaseFrequency" name="amountIncreaseFrequency" [(ngModel)]="frequency" fxLayout="row wrap"> -->
              <mat-radio-group formControlName="amountIncreaseFrequency" name="amountIncreaseFrequency" fxLayout="row wrap"
                                fxLayoutGap="10px" (change)="amountIncreaseFrequencyChanged($event)">
                <mat-radio-button [value]="'never'" name="unitIncreaseFrequency">No increase</mat-radio-button>
                <mat-radio-button [value]="'all-times'"     name="amountIncreaseFrequency">Each Occurance</mat-radio-button>
                <mat-radio-button [value]="'every-x-times'" name="amountIncreaseFrequency">Every X Occurences</mat-radio-button>
                <mat-radio-button [value]="'yearly'"        name="amountIncreaseFrequency">Yearly</mat-radio-button>
                <mat-radio-button [value]="'quarterly'"     name="amountIncreaseFrequency">Quarterly</mat-radio-button>
              </mat-radio-group>
            </div>
  
            <div fxLayout="row" *ngIf="amountIncreaseFrequency == 'every-x-times'">
              <div  class="increase-rate-label">Increase per:</div>
              <mat-form-field fxFlex="80">
                <mat-label>Number of occurences before increase</mat-label>
                <input matInput type="number" [min]="0" formControlName="xTimesAmountIncreaseInterval" name="xTimesAmountIncreaseInterval">
                <!-- <mat-error *ngIf="xTimesAmountIncreaseIntervalF.errors">When x-occurences is selected, this value is required.</mat-error> -->
              </mat-form-field>
          </div>
  
          <div class="form-section-sub" *ngIf="amountIncreaseFrequency != 'never'">
            <div class="form-section-sub-title">Increase Rate</div>
            <div fxLayout="row">
              <div fxFlex="50" class="form-field increase-select">
                <mat-radio-group name="amntIncrConfig" formControlName="amntIncrConfig" fxLayout="row wrap" fxLayoutGap="10px" (change)="amountIncConfigChanged($event)">
                  <mat-radio-button [value]="'value'"      name="amntIncrConfig">Fixed Amount</mat-radio-button>
                  <mat-radio-button [value]="'percentage'" name="amntIncrConfig">Percentage</mat-radio-button>
                </mat-radio-group>
              </div>
              <div fxFlex="50">
                <mat-form-field *ngIf="amountIncreaseConfig == 'percentage'" class="value-increase-number">
                  <mat-label>Amount Increase Rate</mat-label>
                  <input matInput type="number" [min]="-1000" [max]="1000" name="amountIncreaseRate"
                    formControlName="amountIncreaseRate" />
                  <span matSuffix>%</span>
                  <mat-hint>Rate at which the value increases for each configured increase moment.</mat-hint>
                </mat-form-field>
                
                <mat-form-field class="" *ngIf="amountIncreaseConfig != 'percentage'" class="value-increase-number">
                  <mat-label>Amount Increase Value</mat-label>
                  <input matInput type="number" [min]="-1000" [max]="1000" name="amountIncreaseRate"
                    formControlName="amountIncreaseRate"/>
                  <mat-hint>Decimal value with which the value increases for each configured increase moment.</mat-hint>
                </mat-form-field>
              </div>
            </div>
          </div>   
        </div>
      </div>
  
      <!-- Unit Increase -->
      <div class="form-section" fxLayout="column">
        <h4 class="mat-title type-title">Unit Increase</h4>
      
        <div class="form-section-body" fxLayout="column">
          <div class="form-section-sub">
            <div class="form-section-sub-title">Increase Time</div>
            <div class="form-field increase-select">
              <mat-radio-group name="unitIncreaseFrequency" formControlName="unitIncreaseFrequency" fxLayout="row wrap" 
                              fxLayoutGap="10px" (change)="unitIncreaseFrequencyChanged($event)">
                <mat-radio-button [value]="'never'" name="unitIncreaseFrequency">No increase</mat-radio-button>
                <mat-radio-button [value]="'all-times'" name="unitIncreaseFrequency">Each Occurance</mat-radio-button>
                <mat-radio-button [value]="'every-x-times'" name="unitIncreaseFrequency">Every X Occurences
                </mat-radio-button>
                <mat-radio-button [value]="'yearly'" name="unitIncreaseFrequency">Yearly</mat-radio-button>
                <mat-radio-button [value]="'quarterly'" name="unitIncreaseFrequency">Quarterly</mat-radio-button>
              </mat-radio-group>
            </div>
      
            <div fxLayout="row" *ngIf="unitIncreaseFrequency == 'every-x-times'">
              <div class="increase-rate-label">Increase per: </div>
              <mat-form-field>
                <mat-label>Number of occurences before increase</mat-label>
                <input matInput type="number" required [min]="0" formControlName="xTimesUnitIncreaseInterval"
                  name="xTimesUnitIncreaseInterval">
                <!-- <mat-error *ngIf="xTimesUnitIncreaseIntervalF.errors">When x-occurences is selected, this value is required.</mat-error> -->
              </mat-form-field>
            </div>
           
          </div>
      
          <div class="form-section-sub" *ngIf="unitIncreaseFrequency != 'never'">
            <div class="form-section-sub-title">Increase Rate</div>
            <div fxLayout="row">
              <div fxFlex="50" class="form-field increase-select">
                <mat-radio-group name="unitIncrConfig" formControlName="unitIncrConfig" fxLayout="row wrap"
                                  fxLayoutGap="10px" (change)="unitIncConfigChanged($event)">
                  <mat-radio-button [value]="'value'" name="unitIncrConfig">Fixed Amount</mat-radio-button>
                  <mat-radio-button [value]="'percentage'" name="unitIncrConfig">Percentage</mat-radio-button>
                </mat-radio-group>
              </div>
              <div fxFlex="50">
                <mat-form-field *ngIf="unitIncreaseConfig == 'percentage'" class="value-increase-number">
                  <mat-label>Unit Increase Rate</mat-label>
                  <input matInput type="number" required [min]="-1000" [max]="1000" name="unitIncreaseRate"
                    formControlName="unitIncreaseRate"/>
                  <span matSuffix>%</span>
                  <mat-hint>Rate at which the value increases for each configured increase moment.</mat-hint>
                </mat-form-field>
      
                <mat-form-field *ngIf="unitIncreaseConfig != 'percentage'" class="value-increase-number">
                  <mat-label>Unit Increase Value</mat-label>
                  <input matInput type="number" required name="unitIncreaseRate"
                   formControlName="unitIncreaseRate"/>
                  <mat-hint>Decimal value with which the value increases for each configured increase moment.</mat-hint>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
