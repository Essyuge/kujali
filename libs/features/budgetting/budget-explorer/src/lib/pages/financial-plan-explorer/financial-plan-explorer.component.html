<app-page [loading]="loading">
  <!-- [loadingText]="'Please hold as we load the budget..'"> -->

  <div fxLayout="column" fxlayoutALign="start start" class="container">

    <mat-card class="" *ngIf="state$ | async as state">
      <p class="budget-name">{{ state.budget.name }}</p> 
        <!-- Role:  -->
        <span class="budget-status">
          <!-- TODO -->
          <!--{{ translateStats(budget.status) }}-->
        </span>

        <div class="year-title" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
          <span>
            Current Year:
          </span>
          <mat-form-field class="year-selector">
            <mat-select name="year" [(ngModel)]="year" (ngModelChange)="setYear($event)" required>
              <mat-option *ngFor="let year of years" [value]="year">
                {{ year }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
    </mat-card>

    <!-- chart -->
    <app-year-focus (navigateYearPressed)="navigateYear($event)">

      <app-financial-plan-burn-chart [state$]="state$">
      </app-financial-plan-burn-chart>
  
    </app-year-focus>

    <div class="container" fxLayout="column wrap" fxLayoutAlign="start">

      <!-- Budget Table Viz -->
      <app-financial-plan-pl-tables [state$]="state$" [budgetId]="budgetId" [isInEditMode]="isInEditMode" (navigateYearPressed)="navigateYear($event)">
      </app-financial-plan-pl-tables>

    </div>

  </div>

</app-page>